

<section class="p-8">
  <h1 class="text-3xl font-bold mb-2 text-center text-base-content">The Simpsons API</h1>
  <h2 class="text-lg text-center mb-6 text-base-content/70">Listado de personajes</h2>

  @if (totalPages() > 0) {
    <div class="flex justify-center items-center h-20 mb-4">
      
      <app-pagination 
        [pages]="totalPages()" 
        [currentPage]="paginationService.currentPage()">
      </app-pagination>

    </div>
  }

  @if (!simpsonsResource()) {
    <div class="flex justify-center items-center h-64">
      <span class="loading loading-spinner loading-lg text-primary"></span>
    </div>
  }

  @if (simpsonsResource()) {
    <div class="overflow-x-auto bg-base-100 shadow-xl rounded-box mb-8">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Ocupaci√≥n</th>
            <th>Estado</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          @for (personaje of simpsonsResource()?.results ?? []; track personaje.id) {
            <tr class="hover">
              <td>{{ personaje.id }}</td>
              <td class="font-bold">{{ personaje.name }}</td>
              <td>{{ personaje.occupation }}</td>
              <td>
                <span class="badge" 
                      [ngClass]="personaje.status === 'Alive' ? 'badge-success text-white' : 'badge-error text-white'">
                  {{ personaje.status }}
                </span>
              </td>
              <td>
                <a [routerLink]="['/simpsons', personaje.id]" class="btn btn-sm btn-primary">
                  Ver Detalle
                </a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
    
    }
</section>